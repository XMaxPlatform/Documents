# XMAX Code Weekly


2018/10/08
-----------------------
## 主链
* [exception]异常构造Log Message处理。
* [apirpc]Http应用Allow Credentials配置。
## 侧链
* [test]整理XMAX转账消息的模板，转账json消息的拼接。
* [test]完善XMAX json工具库，消息队列序列化，数值序列化，消息批量发送。
* [message]主循环恶意消息或是损坏的消息，在处理过程会引发错误，现在完善错误提示，方便错误排查.
* [script]整理api js 库代码。
* [v8]修改虚拟机运行合约流程。
## SDK
* [ether]实现Set Provider接口。
* [RPC]Get block RPC实现。
* [css]调整html body样式。
* [model]实现getBlockTransactionCount接口。


2018/9/25
-----------------------
## 主链
* [apirpc]增加Credential Option选项。
* [exception]Log Message生成。
## 侧链
* [test]python测试脚本的基础库开发。
* [test]研发transaction生成模板。
* [test]侧链message生成模板。
* [test]侧链RPC调用模板。
* [script]整理api js库代码。
* [V8]修改虚拟机运行合约流程。
## SDK
* [exception]Error Tip显示支持。
* [express]balance router实现。
* [express]balance路由匹配格式ethereum地址。
* [rpc]balance rpc实现。
* [config|test]test address配置和使用。
* [website] 处理rpc数据截断问题。


2018/9/17
-----------------------
## 主链
* [exception]增加更多异常处理。
## 侧链
* [node]完善多节点启动逻辑。
* [consensus]修正分叉出现的逻辑错误。
* [script]侧链Token增发的合约函数，校验增发数据的完整性，签名及操作的合法性
## SDK
* [web]使用Strict DI模式以增强安全性。
* [wallet-common] 增加wallet common module。
* [style]增加和替换字体样式。
* [transaction]实现获取Gas Price,增加Gas limit信息。
* [transaction]实现Send transaction逻辑。
* [transaction]增加历史交易链接。
* [config]增加以太坊网络配置。
* [account]增加地址格式验证。


2018/9/10
-----------------------
## 主链
* [db]确定区块头的基本结构，为之后出快主逻辑做准备。
* [foundation]实现自动反射逻辑和相关宏，可以减少数据定义时的难度和代码量，增加开发速度。
* [apirpc]Url handler注册管理。
* [exception]去掉旧属性，替换到Implementation Class中。
## 侧链
* [node]修正多节点启动时，节点连接逻辑所引发的一些崩溃问题。
* [script]合约支持收取gas费，为细化gas收取作准备。
* [transaction]实现token交互的相关的基础数据结构，如地址逻辑，消息发送结构，数据缓存结构等。为下一步实现交易逻辑做准备。
## SDK
* [route] 添加home link。
* [project] 调整网站发布导出目录。
* [script] 修复基础库在网页引用的问题。
* [script] 基础库增加私钥转换接口。
* [account] 根据私钥计算显示地址所在网页。
* [account] 增加私钥格式验证逻辑和接口。
* [account] 增加账号信息页面展示。
* [account] 实现异步get balance逻辑。
* [account] 余额信息显示格式调整。
* [account] 修复账号下拉列表的问题。
* [config] 修改工程使用测试网络。


2018/9/3
-----------------------
## 主链
* [db]完善插件初始化逻辑，剔除已经废弃的函数，解决初始化流程相关问题
* [db]基于unitedb，添加主账号表的数据结构
* [db]定义区块数据结构
## 侧链
* [node]多机器同时启动节点，初步验证侧链多节点的启动逻辑
* [node]修正节点启动过程中，数据同步延迟引发的数据错误bug
* [v8]限制每个块的消息最大数量
* [v8]系统交易可以结算gas费
* [v8]排序优先使用高gas
* [script]实现ERC20代币转入侧链后交易流程能在以太坊验证
* [script]修改ERC20数据结构导致单元测试错误的问题
* [mongodb]调整MongoDB适应新的Contract ABI结构主链
* [apirpc]网络消息请求缓存处理
* [apirpc]添加http handler相应的结构和接口
  

2018/8/27
-----------------------
*  主链：改进unitedb的表项声明。
*  主链：添加链处理模块。
*  主链：RPC插件网络功能。
*  主链：改进异常处理。
*  侧链：独立的合约帐号逻辑。
*  侧链：侧链资金追溯机制。
*  侧链：多节点互联功能。
*  侧链：改进数据打包功能。


2018/8/20
-----------------------
*  主链：增加unitedb。
*  主链：unitedb测试用例。
*  主链：完善RPC插件的网络功能逻辑。
*  侧链：拆分合约账号。
*  侧链：调整block receipt反射结构。
*  侧链：确认块size的计算和持久化。
*  侧链：改进token symbol编码长度支持到7字符。
*  侧链：简化接口调用。
*  侧链：数据打包机制。

2018/8/13
-----------------------
*  主链：修复无MongoDB时的编译错误。
*  主链：优化应用程序初始化的插件配置逻辑。
*  主链: 实现database数据提交功能。
*  主链：数据的序列化和哈希功能。
*  主链：database操作的基本测试用例。
*  侧链：改进权限系统处理逻辑。
*  侧链：改进MongoDB的transaction序列化。
*  侧链：调整创世块初始化结构。
*  侧链：修正区块验证的bug。
*  侧链：解决Token精度错误导致的bug。
*  侧链：加入端口映射功能。
*  侧链：修复V8依赖环境部署问题。


2018/8/6
-----------------------
*  主链：内存数据处理逻辑。
*  主链：增加APIRPC插件。
*  侧链：权限系统处理逻辑。
*  侧链：ERC20 transfer 接口。
*  侧链：ERC20 transferFrom 接口。
*  侧链：ERC721 balanceOf 接口。
*  侧链：ERC721 优化Owner查找。
*  侧链：ERC721 ownerof接口。
*  侧链：实现SafeMath库。


2018/7/30
-----------------------
*  主链：区块验证功能。
*  主链：版本号合并功能。
*  主链：自动生成API文档。
*  主链：P2P网络收发消息功能。
*  主链：P2P端口映射功能。
*  主链：虚拟机整型数定义调整。
*  侧链：分支切换逻辑。
*  侧链：配置选项说明。
*  侧链：插件依赖管理器重构。
*  侧链：交易逻辑调整。


2018/7/23
-----------------------
*  主链：定义消息收发机制。
*  主链：增加协议基础库工程。
*  主链：配置说明文档。
*  侧链：权限系统的数据结构。
*  侧链：分叉逻辑。
*  侧链：支持更多的字符类型和更长的名称。
*  侧链：V8虚拟机类型扩展。
*  侧链：ERC20，ERC721的Revoke接口实现。
*  侧链：ERC20 totalsupply 和 balanceOf 接口实现。

2018/7/16
-----------------------
*  主链：P2P网络框架。
*  主链：database的模块实现。
*  主链：实现配置动态插件加载。
*  主链：插件依赖解析。
*  侧链：ERC721数据结构单元测试用例。
*  侧链：Issue ERC721接口实现。
*  侧链：ERC20和ERC721 Mint接口实现。
*  侧链：扩展ERC20数据结构。
*  侧链：transaction的处理流程实现。
*  侧链：不可逆块的自动确认逻辑。


2018/7/9
-----------------------
*  主链字符串格式化与log封装。
*  主链db初始结构。
*  主链配置解析。
*  主链程序选项管理器。
*  侧链调整产生区块时的消息处理流程。
*  侧链Windows平台构建环境调整。
*  侧链ERC20数据结构单元测试用例。
*  侧链扩展ERC721数据结构。
*  虚拟机已执行指令存储。
*  侧链P2P网络。


2018/7/2
-----------------------
*  主链Application流程改造。
*  完善主链的基础库：exception,any value,any object,short name。
*  主链网络测试用例。
*  侧链区块保存和读取。
*  侧链的BFT验证逻辑。
*  创建侧链测试框架。
*  侧链加入节点间区块网络同步和广播。
*  侧链ERC20货币数据结构扩展。
*  将函数回调插入形式从ast解析阶段到字节码生成阶段。
*  在虚拟机的每次指令中加入回调。


2018/6/25
-----------------------
*  V8切换到6.4.1。
*  内置函数嵌入接口，每次区块调用内置函数。
*  整理MongoDB的构建环境配置。
*  增加MongoDB的测试工程，编写测试用例。
*  完善ProtoBuf测试用例。
*  基础类实现any value，用于存储任意值，方便以后块数据序列化和字符串的格式化。
*  编写any value的测试用例。
*  出块插件的基础逻辑框架。
*  文件功能API封装。


2018/6/19
-----------------------
*  侧链智能合约文档。
*  统一插件系统命名规范。
*  proto文件编译构建流程。
*  建立Protobuf测试用例。
*  主链网络插件。
*  主链时间数据类型。
*  时间结构体测试用例。


2018/6/13
-----------------------
*  主链基础模块：日志，基础类型，宏定义，cmake配置。
*  主链实现一个精简的应用框架，支持灵活的插件模式。
*  实现侧链MongoDB的序列化逻辑，修复了一些错误。
*  主链增加必须的一些底层库： secp256k1, protobuf, boost,并提供编译说明。
*  嵌入V8虚拟机: 1、支持编译js脚本. 2、支持调用函数 . 3.输出js类型。
*  在侧链补充了一些智能合约说明。
